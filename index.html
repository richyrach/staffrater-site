<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Staff Rater ‚Äî Elevate your Discord staff</title>
  <meta name="description" content="Staff Rater is a sleek Discord bot for staff ratings, tickets, applications, leaderboards, and profiles. Beautiful UI, fast setup, and honest moderation workflows." />
  <link rel="icon" href="staff-rater-icon.png">

  <!-- Canonical host lock -->
  <script>
  (function(){
    var wanted="www.staffrater.xyz";
    if(location.host!==wanted){
      location.replace("https://"+wanted+location.pathname+location.search+location.hash);
    }
  })();
  </script>

  <!-- Open Graph -->
  <meta property="og:title" content="Staff Rater ‚Äî Elevate your Discord staff" />
  <meta property="og:description" content="A sleek Discord bot for staff ratings, tickets, applications, leaderboards, and profiles." />
  <meta property="og:image" content="staff-rater-icon.png" />
  <meta property="og:type" content="website" />

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            bg: '#070b14',
            panel: '#0c1322',
            line: 'rgba(255,255,255,0.08)'
          },
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui'],
            mono: ['JetBrains Mono', 'ui-monospace']
          },
          boxShadow: {
            glow: '0 0 0 1px rgba(255,255,255,0.08), 0 15px 35px rgba(0,0,0,0.6), inset 0 0 0 1px rgba(255,255,255,0.04)'
          },
          keyframes: {
            floaty: { '0%,100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-6px)' } },
            shimmer: { '100%': { transform: 'translateX(100%)' } },
          },
          animation: {
            floaty: 'floaty 6s ease-in-out infinite',
            shimmer: 'shimmer 1.25s linear infinite',
          }
        }
      }
    }
  </script>
  <style>
    :root { color-scheme: dark; }
    html, body { background: #070b14; }
    .mesh { position: fixed; inset: 0; pointer-events:none; z-index: -1; }
    .mesh:before, .mesh:after { content: ""; position:absolute; width: 1200px; height: 1200px; filter: blur(90px); opacity:.25; border-radius: 50%; }
    .mesh:before { left: -300px; top: -300px; background: radial-gradient(600px 600px at 50% 50%, #22d3ee33, transparent 70%); }
    .mesh:after { right: -200px; bottom: -300px; background: radial-gradient(600px 600px at 50% 50%, #a78bfa33, transparent 70%); }
    .gborder { position: relative; }
    .gborder:before { content:''; position:absolute; inset:0; border-radius: 18px; padding: 1px; background: linear-gradient(120deg, rgba(34,211,238,.5), rgba(99,102,241,.5)); -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; border-radius:18px; }
  </style>
</head>
<body class="text-white font-sans antialiased">
  <div class="mesh"></div>

  <!-- Nav -->
  <header class="sticky top-0 z-30 backdrop-blur supports-[backdrop-filter]:bg-bg/50 bg-bg/80 border-b border-white/5">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="/" class="flex items-center gap-3">
        <img src="/staff-rater-icon.png" class="w-9 h-9 rounded-xl ring-1 ring-white/10" alt="Staff Rater">
        <span class="text-white/90 font-semibold tracking-wide">Staff Rater</span>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-white/70">
        <a href="#features" class="hover:text-white">Features</a>
        <a href="#how" class="hover:text-white">How it works</a>
        <a href="https://discord.gg/BR7zmffNFC" class="hover:text-white" target="_blank" rel="noopener">Support</a>
      </nav>
      <div id="auth-area" class="flex items-center gap-3">
        <a href="/api/login?return=/" class="inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white/10 hover:bg-white/15 ring-1 ring-white/10">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 127.14 96.36" fill="currentColor"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47.36a72.06,72.06,0,0,0-3.52,7.18A97.68,97.68,0,0,0,52,7.18,72.37,72.37,0,0,0,48.46,0,105.89,105.89,0,0,0,22.21,8.09C4,33.65-2.43,58.6.78,83.27A106.31,106.31,0,0,0,32.39,96.36,77.7,77.7,0,0,0,39.6,85.9a68.42,68.42,0,0,1-10.85-5.23c.91-.66,1.8-1.35,2.65-2.06A71.14,71.14,0,0,0,63.57,84.4a71.31,71.31,0,0,0,32.15-5.79c.85.71,1.74,1.39,2.65,2.06A68.68,68.68,0,0,1,87.52,85.9a77.33,77.33,0,0,0,7.21,10.46,106.12,106.12,0,0,0,31.61-13.09C129.57,58.71,123.13,33.76,107.7,8.07Z"/></svg>
          <span>Sign in with Discord</span>
        </a>
        <a href="https://discord.com/oauth2/authorize?client_id=1410293903630012508&permissions=8&integration_type=0&scope=bot+applications.commands" class="hidden sm:inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-indigo-500 hover:bg-indigo-600 shadow-glow">
          Invite Bot
        </a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="max-w-6xl mx-auto px-4 pt-14 pb-10">
    <div class="grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h1 class="text-4xl sm:text-5xl font-extrabold leading-tight">Fair, fast, and beautiful <span class="text-cyan-300">staff ratings</span> for your Discord</h1>
        <p class="text-white/70 mt-4 text-lg">Tickets, applications, leaderboards, and profiles ‚Äî all in one sleek bot. Set up in minutes, moderate with confidence.</p>
        <div class="flex flex-wrap gap-3 mt-6">
          <a href="https://discord.com/oauth2/authorize?client_id=1410293903630012508&permissions=8&integration_type=0&scope=bot+applications.commands" class="inline-flex items-center gap-2 px-4 py-3 rounded-xl bg-indigo-500 hover:bg-indigo-600 font-medium shadow-glow">Invite to Server</a>
          <a href="/dashboard/index.html" class="inline-flex items-center gap-2 px-4 py-3 rounded-xl bg-white/10 hover:bg-white/15 ring-1 ring-white/10">Open Dashboard</a>
        </div>
        <div class="mt-6 text-sm text-white/50">made with ‚ù§Ô∏è by richy_Rach</div>
      </div>
      <div class="gborder rounded-2xl p-[1px]">
        <div class="rounded-2xl bg-panel/80 p-5 shadow-glow">
          <img src="/staff-rater-icon.png" class="w-20 h-20 rounded-xl ring-1 ring-white/10 animate-floaty" alt="">
          <div class="mt-4 text-white/80">Slash commands you‚Äôll love:</div>
          <ul class="mt-2 space-y-2 text-white/70 text-sm">
            <li>‚≠ê <code class="font-mono">/rate</code> ‚Äî rate your staff fairly</li>
            <li>üé´ <code class="font-mono">/postticketbutton</code> ‚Äî support tickets, auto-channels</li>
            <li>üìã <code class="font-mono">/postappui</code> ‚Äî run applications with questions</li>
            <li>üèÜ <code class="font-mono">/leaderboard</code> ‚Äî highlight your top staff</li>
            <li>üìä <code class="font-mono">/createpoll</code> ‚Äî polls with buttons</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section id="features" class="max-w-6xl mx-auto px-4 pb-16">
    <h2 class="text-2xl font-semibold mb-6">Why servers pick Staff Rater</h2>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-5">
      <div class="rounded-2xl bg-panel/60 p-5 shadow-glow">
        <div class="text-cyan-300 font-semibold">Honest reviews</div>
        <p class="text-white/70 mt-2">Anonymous ratings with comment optional. Flag unfair reviews for moderation.</p>
      </div>
      <div class="rounded-2xl bg-panel/60 p-5 shadow-glow">
        <div class="text-cyan-300 font-semibold">Tickets done right</div>
        <p class="text-white/70 mt-2">One click to open, claim, and close ‚Äî with logs.</p>
      </div>
      <div class="rounded-2xl bg-panel/60 p-5 shadow-glow">
        <div class="text-cyan-300 font-semibold">Powerful applications</div>
        <p class="text-white/70 mt-2">Custom forms, accept/reject flow, even start interview tickets.</p>
      </div>
      <div class="rounded-2xl bg-panel/60 p-5 shadow-glow">
        <div class="text-cyan-300 font-semibold">Live dashboards</div>
        <p class="text-white/70 mt-2">See your servers, configure channels, and more.</p>
      </div>
      <div class="rounded-2xl bg-panel/60 p-5 shadow-glow">
        <div class="text-cyan-300 font-semibold">Secure OAuth</div>
        <p class="text-white/70 mt-2">Sign in with Discord, no passwords, no fuss.</p>
      </div>
      <div class="rounded-2xl bg-panel/60 p-5 shadow-glow">
        <div class="text-cyan-300 font-semibold">Fast & lightweight</div>
        <p class="text-white/70 mt-2">Pure static frontend with serverless API ‚Äî speedy everywhere.</p>
      </div>
    </div>
  </section>

  <!-- How -->
  <section id="how" class="max-w-6xl mx-auto px-4 pb-20">
    <h2 class="text-2xl font-semibold mb-6">How it works</h2>
    <ol class="space-y-4 text-white/70">
      <li>1. Invite the bot to your server</li>
      <li>2. Open the dashboard and pick your server</li>
      <li>3. Configure rating + result channels, tickets, and applications</li>
      <li>4. Post your rating UI and go!</li>
    </ol>
  </section>

  <!-- Footer -->
  <footer class="border-t border-white/5">
    <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-white/50 flex flex-col sm:flex-row gap-2 justify-between">
      <div>¬© <span id="yr"></span> Staff Rater</div>
      <div class="flex gap-4">
        <a href="https://discord.gg/BR7zmffNFC" target="_blank" rel="noopener" class="hover:text-white/70">Support</a>
        <a href="/dashboard/index.html" class="hover:text-white/70">Dashboard</a>
      </div>
    </div>
  </footer>

  <!-- Auth & helpers -->
  <script>
    document.getElementById('yr').textContent = new Date().getFullYear();
  </script>
  <script>
  (function () {
    // 1) Capture token from HASH or QUERY, store in sessionStorage, clean URL
    (function captureToken() {
      try {
        var t=null;
        if (location.hash) {
          var m = location.hash.match(/(?:^|[&#])token=([^&#]+)/);
          if (m) t = decodeURIComponent(m[1]);
        }
        if (!t && location.search) {
          var m2 = location.search.match(/(?:\?|&)token=([^&#]+)/);
          if (m2) t = decodeURIComponent(m2[1]);
        }
        if (t) {
          sessionStorage.setItem('sr_token', t);
          var clean = location.origin + location.pathname + location.search.replace(/([?&])token=[^&#]+(&|$)/, function(_,a,b){return a==='?'&&b?'?':''}) + (location.hash.replace(/(#|&)token=[^&#]+/,'')||'');
          history.replaceState(null,'', clean);
        }
      } catch(e){}
    })();

    // 2) Patch fetch for /api/*
    (function patchFetch(){
      var orig = window.fetch;
      window.fetch = function(input, init){
        try{
          var url = (typeof input==='string')?input:input.url;
          if (url && url.indexOf('http')!==0 && url.startsWith('/api/')){
            init = init || {};
            var h = new Headers(init.headers || {});
            var tok = sessionStorage.getItem('sr_token');
            if (tok) h.set('Authorization','Bearer '+tok);
            init.headers = h;
            if (!('credentials' in init)) init.credentials='omit';
            if (!('cache' in init)) init.cache='no-store';
            return orig(url, init);
          }
        }catch(e){}
        return orig(input, init);
      };
    })();

    // 3) Hydrate header auth area (if logged in)
    (async function hydrate(){
      var el=document.getElementById('auth-area'); if(!el) return;
      try{
        var r=await fetch('/api/me'); var d=await r.json().catch(()=>({}));
        if(r.ok && d.ok && d.session && d.session.user){
          var u=d.session.user;
          var avatar = u.avatar ? `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.png?size=64` : 'https://cdn.discordapp.com/embed/avatars/0.png';
          el.innerHTML = `
            <a href="/dashboard/index.html" class="hidden sm:inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white/10 hover:bg-white/15 ring-1 ring-white/10">Dashboard</a>
            <div class="flex items-center gap-3">
              <img src="${avatar}" class="w-8 h-8 rounded-full ring-1 ring-white/10" alt="">
              <span class="text-white/80 text-sm max-w-[140px] truncate">${u.username}</span>
              <a href="/api/logout?redirect=/" class="inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-white/10 hover:bg-white/15 ring-1 ring-white/10">Log out</a>
            </div>`;
        }
      }catch(e){}
    })();
  })();
  </script>
</body>
</html>
