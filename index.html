<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Staff Rater — Ratings, tickets, applications & moderation for Discord</title>
  <meta name="description" content="Staff Rater is a Discord bot that helps communities run smoother: staff ratings, tickets, applications, leaderboards, and moderation—fast setup, clean UI." />
  <meta property="og:title" content="Staff Rater — Staff ratings that actually work" />
  <meta property="og:description" content="Ratings, tickets, applications, leaderboards, and moderation—built for real servers." />
  <meta property="og:image" content="/staff-rater-icon.png" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0b1222" />
  <link rel="icon" href="/staff-rater-icon.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/site.css" />
  <style>
    .inter { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .h-title{font-family:Inter, ui-sans-serif, system-ui}
    .brand{font-family:Inter, ui-sans-serif, system-ui}

    /* Fix huge icon everywhere (top nav + footer) */
    .brand img { width: 28px; height: 28px; object-fit: contain; border-radius: 10px; }
    .footer .brand img { width: 28px; height: 28px; object-fit: contain; border-radius: 10px; }

    /* Partner block (blended into your site.css look) */
    .partner-wrap{ margin-top: 22px; }
    .partner-card{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:16px 16px;
      border-radius:18px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      box-shadow: 0 10px 30px rgba(0,0,0,.22);
      transition: transform .2s ease, border-color .2s ease, background .2s ease;
      text-decoration:none;
    }
    .partner-card:hover{
      transform: translateY(-2px);
      border-color: rgba(99,102,241,.45);
      background: rgba(255,255,255,.06);
    }
    .partner-left{ display:flex; align-items:center; gap:14px; min-width:0; }
    .partner-logo{
      width:44px; height:44px;
      border-radius:14px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.09);
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .partner-logo img{ width:28px; height:28px; object-fit:contain; opacity:.95; }
    .partner-meta{ min-width:0; }
    .partner-title{ font-weight:700; }
    .partner-sub{ color: rgba(226,232,240,.72); font-size:13px; margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .partner-tag{ margin-left:auto; }
    .partner-arrow{
      width:34px; height:34px; border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.09);
      flex: 0 0 auto;
    }
    .partner-arrow svg{ width:18px; height:18px; opacity:.75; }

    /* Small avatar in navbar */
    .nav-avatar{ width:28px; height:28px; border-radius:999px; object-fit:cover; border:1px solid rgba(255,255,255,.14); }
    .nav-user{ display:inline-flex; align-items:center; gap:10px; }
  </style>
</head>
<body>
  <div class="toast" id="sr-toast">Copied</div>

  <header class="nav">
    <div class="container">
      <div class="nav-inner">
        <a class="brand" href="/">
          <img src="/staff-rater-icon.png" alt="Staff Rater" />
          <span class="inter">Staff Rater</span>
          <span class="badge">Discord bot</span>
        </a>

        <nav class="nav-links" aria-label="Primary navigation">
          <a href="#features">Features</a>
          <a href="/commands.html">Commands</a>
          <a href="/stats.html">Stats</a>
          <a href="#support">Support</a>
        </nav>

        <!-- AUTH AREA (this is where your "Sign in" swaps into profile + Dashboard when logged in) -->
        <div class="nav-cta" id="nav-auth">
          <a class="btn ghost" href="/api/login" id="nav-signin">Sign in</a>
          <a class="btn primary" href="https://discord.com/oauth2/authorize?client_id=1410293903630012508&permissions=8859859864780657&integration_type=0&scope=bot" target="_blank" rel="noreferrer">Invite to Discord</a>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div class="hero-grid">
          <div class="reveal">
            <span class="badge">Fair, fast, and reliable</span>
            <h1 class="h-title">Staff ratings that build trust — not drama.</h1>
            <p class="h-sub">
              Staff Rater helps communities run smoother with <b>clean ratings</b>, <b>tickets</b>, <b>applications</b>, and <b>moderation tools</b>.
              Setup takes minutes. Everything stays organized.
            </p>

            <div class="h-actions">
              <a class="btn primary" href="https://discord.com/oauth2/authorize?client_id=1410293903630012508&permissions=8859859864780657&integration_type=0&scope=bot" target="_blank" rel="noreferrer">
                <span>Invite</span> <span class="kbd">/</span>
              </a>
              <a class="btn" href="/commands.html">Explore commands</a>
              <a class="btn" href="/dashboard/">Open dashboard</a>
              <a class="btn ghost" href="#how">How it works</a>
            </div>

            <div class="hr"></div>

            <div class="pill">
              <span class="muted">Tip:</span>
              <span>Use <span class="kbd">/postratingui</span> once and the UI persists after restarts.</span>
            </div>
          </div>

          <aside class="panel pad reveal" style="position:relative; overflow:hidden;">
            <div style="display:flex;justify-content:space-between;align-items:flex-start;gap:12px;">
              <div>
                <div class="panel-title inter">Live overview</div>
                <div class="mini">Auto-updates if your API exposes public stats.</div>
              </div>
              <span class="badge"><span style="width:7px;height:7px;border-radius:99px;background:rgba(34,197,94,.9);display:inline-block"></span> online</span>
            </div>

            <div class="grid-3" style="margin-top:14px;">
              <div class="stat">
                <div class="num" data-stat-key="guilds">90+</div>
                <div class="lbl">servers using Staff Rater</div>
              </div>
              <div class="stat">
                <div class="num" data-stat-key="total_ratings">—</div>
                <div class="lbl">ratings recorded</div>
              </div>
              <div class="stat">
                <div class="num" data-stat-key="avg_rating" data-fmt="float">—</div>
                <div class="lbl">average staff score</div>
              </div>
            </div>

            <div class="hr"></div>

            <div class="mini">Last updated: <span id="sr-stats-updated" class="mono">—</span></div>

            <div class="hr"></div>

            <div style="display:flex;gap:10px;flex-wrap:wrap">
              <span class="badge">Ratings</span>
              <span class="badge">Tickets</span>
              <span class="badge">Applications</span>
              <span class="badge">Moderation</span>
              <span class="badge">Slash commands</span>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <section class="section" id="features">
      <div class="container">
        <h2 class="reveal inter">Everything a staff team needs, without the clutter.</h2>
        <p class="lead reveal">
          Designed for real communities: clear flows, predictable permissions, and UI that doesn't break when the bot restarts.
        </p>

        <div class="cards">
          <div class="card reveal">
            <div class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M12 2l3 7h7l-5.6 4.1 2.2 7L12 16.9 5.4 20.1l2.2-7L2 9h7l3-7z" stroke="rgba(226,232,240,.9)" stroke-width="1.6" stroke-linejoin="round"/>
              </svg>
            </div>
            <h3 class="inter">Staff ratings & profiles</h3>
            <p>Collect consistent 1–5 ratings with optional comments. View profiles, trends, and leaderboards when needed.</p>
          </div>

          <div class="card reveal">
            <div class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M4 4h16v12H7l-3 3V4z" stroke="rgba(226,232,240,.9)" stroke-width="1.6" stroke-linejoin="round"/>
              </svg>
            </div>
            <h3 class="inter">Tickets done right</h3>
            <p>Open, claim, log, and close tickets with a simple button panel. Keeps support organized for staff.</p>
          </div>

          <div class="card reveal">
            <div class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M6 3h12v18H6V3z" stroke="rgba(226,232,240,.9)" stroke-width="1.6"/>
                <path d="M8 7h8M8 11h8M8 15h6" stroke="rgba(226,232,240,.9)" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
            </div>
            <h3 class="inter">Applications</h3>
            <p>Collect structured applications with questions and review queues. Faster onboarding with less chaos.</p>
          </div>

          <div class="card reveal">
            <div class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M12 2a7 7 0 0 1 7 7v3l2 2v2H3v-2l2-2V9a7 7 0 0 1 7-7z" stroke="rgba(226,232,240,.9)" stroke-width="1.6" stroke-linejoin="round"/>
                <path d="M9.5 20a2.5 2.5 0 0 0 5 0" stroke="rgba(226,232,240,.9)" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
            </div>
            <h3 class="inter">Moderation toolbox</h3>
            <p>Warns, mutes, bans, purge, and basic utilities—so you don't need 5 different bots for basics.</p>
          </div>

          <div class="card reveal">
            <div class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M4 12h16M12 4v16" stroke="rgba(226,232,240,.9)" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
            </div>
            <h3 class="inter">Persistent UI</h3>
            <p>Your button panels and menus are restored after restarts. Less maintenance, fewer broken messages.</p>
          </div>

          <div class="card reveal">
            <div class="icon" aria-hidden="true">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M7 12l3 3 7-7" stroke="rgba(226,232,240,.9)" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z" stroke="rgba(226,232,240,.9)" stroke-width="1.6"/>
              </svg>
            </div>
            <h3 class="inter">Clean permissions</h3>
            <p>Commands follow Discord permissions and server roles—so staff can manage, members can rate, and everything stays safe.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="how">
      <div class="container">
        <div class="split">
          <div class="panel pad reveal">
            <h2 class="inter" style="margin-top:0">Setup in 3 steps</h2>
            <ol class="list">
              <li><b>Invite</b> the bot with Administrator permissions (or customize if you prefer).</li>
              <li>Run <span class="kbd">/setratingchannel</span> and <span class="kbd">/postratingui</span> to create the rating panel.</li>
              <li>Add staff with <span class="kbd">/addadmin</span> and you're live.</li>
            </ol>
            <div class="hr"></div>
            <div class="mini">Want tickets too? Add <span class="kbd">/setticketconfig</span> then <span class="kbd">/postticketbutton</span>.</div>
          </div>

          <div class="panel pad reveal">
            <h2 class="inter" style="margin-top:0">What your members see</h2>
            <p class="lead" style="margin:0 0 12px;">
              A simple rating flow: select staff, choose 1–5, optional comment. No messy forms.
            </p>
            <div class="card" style="margin-top:10px;">
              <div class="panel-title inter">Example flow</div>
              <p class="muted" style="margin:10px 0 0;">
                <span class="kbd">/rate</span> → choose staff → choose score → (optional) comment → done.
              </p>
              <div class="hr"></div>
              <div class="mini">Staff can view <span class="kbd">/profile</span> and <span class="kbd">/leaderboard</span> as needed.</div>
            </div>
          </div>
        </div>

        <div class="hr"></div>

        <div class="panel pad reveal">
          <div class="split">
            <div>
              <h2 class="inter" style="margin-top:0">Built to scale past “small server” problems</h2>
              <p class="lead" style="margin:0">
                When communities grow, trust and consistency matter. Staff Rater adds structure without making your server feel corporate.
              </p>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;align-content:flex-start;justify-content:flex-end;">
              <span class="badge">No more anonymous drama</span>
              <span class="badge">Clear review history</span>
              <span class="badge">Simple staff accountability</span>
              <span class="badge">Support workflows</span>
            </div>
          </div>
        </div>

      </div>
    </section>

    <section class="section" id="support">
      <div class="container">
        <h2 class="reveal inter">Help center</h2>
        <p class="lead reveal">Quick answers for the most common setup questions.</p>

        <div class="faq reveal">
          <div class="faq-item open">
            <button class="faq-q" type="button">
              How do I set up ratings?
              <span class="chev">▾</span>
            </button>
            <div class="faq-a">
              Invite the bot → set a channel with <span class="kbd">/setratingchannel</span> → post the UI with <span class="kbd">/postratingui</span> → add staff with <span class="kbd">/addadmin</span>.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-q" type="button">
              Can I move channels later?
              <span class="chev">▾</span>
            </button>
            <div class="faq-a">
              Yes. Re-run <span class="kbd">/setratingchannel</span> or <span class="kbd">/setresultchannel</span> and then post the UI again.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-q" type="button">
              Does Staff Rater read message content?
              <span class="chev">▾</span>
            </button>
            <div class="faq-a">
              Staff Rater is built around slash commands, buttons, and structured inputs. It focuses on rating data you intentionally submit.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-q" type="button">
              Where can I get support?
              <span class="chev">▾</span>
            </button>
            <div class="faq-a">
              Join the support server: <a class="btn small" style="margin-left:10px" href="https://discord.gg/BR7zmffNFC" target="_blank" rel="noreferrer">Discord Support</a>
            </div>
          </div>
        </div>

        <!-- PARTNER (blended, not Tailwind) -->
        <div class="partner-wrap reveal">
          <div class="panel pad">
            <div class="panel-title inter">Official partner</div>
            <p class="muted" style="margin:10px 0 0; line-height:1.7;">
              Staff Rater proudly partners with <b>Forminator</b> for advanced application systems and form management across Discord communities.
            </p>

            <div style="margin-top:14px;">
              <a class="partner-card" href="https://forminator.gg" target="_blank" rel="noopener noreferrer">
                <div class="partner-left">
                  <div class="partner-logo" aria-hidden="true">
                    <img src="/assets/forminator-logo.png" alt="Forminator">
                  </div>
                  <div class="partner-meta">
                    <div class="partner-title inter">Forminator</div>
                    <div class="partner-sub">Advanced Discord Form Solutions</div>
                  </div>
                </div>

                <span class="badge partner-tag">Partner</span>

                <div class="partner-arrow" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none">
                    <path d="M9 5l7 7-7 7" stroke="rgba(226,232,240,.85)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </a>
            </div>
          </div>
        </div>

        <div class="hr"></div>

        <div class="panel pad reveal">
          <div class="split">
            <div>
              <div class="panel-title inter">Ready to try it?</div>
              <p class="muted" style="margin:8px 0 0; line-height:1.6;">
                Add Staff Rater to your server and set up the rating UI in a couple minutes.
              </p>
            </div>
            <div style="display:flex;gap:10px;justify-content:flex-end;align-items:center;flex-wrap:wrap;">
              <a class="btn" href="/privacy.html">Privacy</a>
              <a class="btn primary" href="https://discord.com/oauth2/authorize?client_id=1410293903630012508&permissions=8859859864780657&integration_type=0&scope=bot" target="_blank" rel="noreferrer">Invite to Discord</a>
            </div>
          </div>
        </div>

      </div>
    </section>
  </main>


  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div>
          <div class="brand" style="gap:10px">
            <img src="/staff-rater-icon.png" alt="Staff Rater" />
            <span class="inter">Staff Rater</span>
          </div>
          <p class="small" style="margin:10px 0 0; line-height:1.65;">
            A practical Discord bot for staff accountability and smoother operations:
            ratings, tickets, applications, and moderation.
          </p>
          <p class="small muted" style="margin:10px 0 0;">© 2026 Staff Rater</p>
        </div>
        <div>
          <div class="panel-title inter">Product</div>
          <div class="small" style="margin-top:10px;display:grid;gap:8px">
            <a href="/commands.html">Commands</a>
            <a href="/stats.html">Public stats</a>
            <a href="/dashboard/">Dashboard</a>
          </div>
        </div>
        <div>
          <div class="panel-title inter">Support</div>
          <div class="small" style="margin-top:10px;display:grid;gap:8px">
            <a href="https://discord.gg/BR7zmffNFC" target="_blank" rel="noreferrer">Discord server</a>
            <a href="/privacy.html">Privacy policy</a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script src="/assets/site.js"></script>

  <!-- AUTH + MINI STATS (works like your dashboard logic: /api/me drives the header) -->
  <script>
  (function(){
    // FAQ toggles (in case your site.js doesn't do it)
    try{
      document.querySelectorAll('.faq-q').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const item = btn.closest('.faq-item');
          if(!item) return;
          const open = item.classList.contains('open');
          document.querySelectorAll('.faq-item').forEach(x=>x.classList.remove('open'));
          if(!open) item.classList.add('open');
        });
      });
    }catch(e){}

    // Swap navbar Sign in -> profile/dashboard/logout if logged in
    async function authSwap(){
      const host = document.getElementById('nav-auth');
      if(!host) return;

      let me = null;
      try{
        const r = await fetch('/api/me', { cache:'no-store' });
        me = r.ok ? await r.json() : null;
      }catch(e){}

      if(!me || !me.ok || !me.session || !me.session.user){
        // not logged in, keep Sign in
        return;
      }

      const u = me.session.user;
      const avatar = u.avatar
        ? `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.png?size=64`
        : 'https://cdn.discordapp.com/embed/avatars/0.png';

      host.innerHTML = `
        <a class="btn ghost" href="/dashboard/">Dashboard</a>
        <span class="nav-user">
          <img class="nav-avatar" src="${avatar}" alt="">
          <span class="small" style="max-width:140px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:.85">${u.username}</span>
        </span>
        <a class="btn" href="/api/logout?redirect=/">Log out</a>
      `;
    }

    // Live stats box (tries /api/stats-get; if missing it stays as placeholders)
    async function hydrateMiniStats(){
      const updatedEl = document.getElementById('sr-stats-updated');
      const nodes = document.querySelectorAll('[data-stat-key]');
      function setUpdated(txt){ if(updatedEl) updatedEl.textContent = txt; }

      let payload=null;
      try{
        const r = await fetch('/api/stats-get', { cache:'no-store' });
        if(r.ok) payload = await r.json();
      }catch(e){}

      if(!payload || payload.ok === false){
        setUpdated('—');
        return;
      }

      // Support both {guilds,...} and {stats:{...}}
      const stats = payload.stats || payload;

      nodes.forEach(el=>{
        const key = el.getAttribute('data-stat-key');
        if(!key) return;
        let v = stats[key];
        if(v === undefined || v === null) return;

        const fmt = el.getAttribute('data-fmt');
        if(fmt === 'float'){
          const num = Number(v);
          if(!Number.isNaN(num)) el.textContent = num.toFixed(2);
          else el.textContent = String(v);
        } else {
          el.textContent = String(v);
        }
      });

      if(stats.updated_at){
        try{
          const d = new Date(stats.updated_at);
          setUpdated(d.toLocaleString());
        }catch(e){
          setUpdated(String(stats.updated_at));
        }
      } else {
        setUpdated('just now');
      }
    }

    authSwap();
    hydrateMiniStats();
  })();
  </script>
</body>
</html>
